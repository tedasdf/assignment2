<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Australia GDP and Economic Indicators</title>
    
    <!-- Include Vega and Vega-Lite -->
    <script src="https://cdn.jsdelivr.net/npm/vega@5.20.2"></script>
    <script src="https://cdn.jsdelivr.net/npm/vega-lite@5.7.0"></script>
    <script src="https://cdn.jsdelivr.net/npm/vega-embed@6.24.0"></script>
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/leaflet.css" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/leaflet.js"></script>
    
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
            background-color: #f9f9f9; /* Light background for contrast */
        }
        header {
            background-color: #4CAF50;
            color: white;
            text-align: center;
            padding: 20px 0; /* Increased padding for a more balanced header */
        }
        .container {
            padding: 40px; /* Increased padding for the main content */
            max-width: 1200px; /* Set a maximum width for better layout */
            margin: auto; /* Center the container */
            background: white; /* White background for content area */
            border-radius: 8px; /* Rounded corners for a modern look */
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1); /* Subtle shadow for depth */
        }
        h2 {
            color: #333; /* Darker color for headings for better readability */
            margin-top: 30px; /* Spacing between sections */
            margin-bottom: 15px; /* Spacing below headings */
            text-align: center; /* Center the text */
        }

        .chart-container {
            width: 100%;
            height: auto;
            margin-bottom: 10px; /* Adjusted margin for better spacing */
        }
        .map-container {
            width: 100%;
            height: auto;
            margin-bottom: 10px; /* Adjusted margin for better spacing */
        }
        footer {
            text-align: center;
            margin: 20px 0;
            color: #777; /* Lighter color for footer text */
        }

        .gdp-indicators {
            display: flex;             /* Enable flexbox layout */
            flex-wrap: wrap;          /* Allow wrapping to new lines */
            gap: 35px;                /* Space between each indicator */
        }

        .indicator {
            display: flex;                /* Enable flexbox for individual indicators */
            flex-direction: column;       /* Stack items vertically */
            align-items: flex-start;      /* Align items at the start */
            gap: 10px;                   /* Space between heading and paragraph */
            flex: 1 0 300px;             /* Allow flexibility, with a minimum width */
            max-width: 400px;            /* Set a maximum width for each indicator */
        }


        .indicator h3 {
            margin: 0;               /* Remove default margin */
            flex: 0 0 auto;          /* Prevent heading from growing */
        }

        .indicator p {
            margin: 0;               /* Remove default margin */
            flex: 1;                 /* Allow paragraph to grow */
        }

        .chart-container {
            display: flex; /* Enable flexbox layout */
            align-items: flex-start; /* Align items at the start vertically */
            gap: 100px; /* Add space between the chart and description */
        }

        .chart {
            flex: 1; /* Allow the chart to grow */
            max-width: 400px; /* Set a maximum width for the chart */
        }

        .chart-description {
            flex: 2; /* Allow the description to grow more than the chart */
            max-width: 600px; /* Set a maximum width for the description */
        }


        /* Responsive design */
        @media (max-width: 600px) {
            .container {
                padding: 20px; /* Less padding on small screens */
            }
            h2 {
                font-size: 1.5em; /* Smaller headings on small screens */
            }
        }
    </style>
</head>
<body>

<header>
    <h1>Australia's GDP and Economic Indicators</h1>
</header>

<div class="container">
    <div class="introduction">
        <h2>Introduction</h2>
        <p>
            Welcome to our exploration of the intricate relationships between economic indicators such as GDP growth, inflation rates, unemployment rates, and government debt. This analysis is targeted at economists, students, and policy makers who are keen to understand how these variables interact within the broader economic landscape. 
        </p>
        <p>
            The aim of this page is to provide insights into the dynamics of economic growth and the factors that influence it. We will delve into how GDP growth is affected by inflation and unemployment, and examine the complexities of government debt's impact on economic performance. 
        </p>
        <p>
            Our approach involves using historical data and graphical representations to illustrate these relationships clearly. By breaking down these concepts, we hope to enhance understanding and inform better economic decision-making.
        </p>
    </div>
    

    <!-- GDP (PPP) and GDP (Nominal) -->
    <h2>Australia GDP (PPP) and GDP (Nominal) from 1982 to 2027</h2>
    <div id="gdp-line-chart" class="chart-container"></div>
    <p>
        The provided dataset outlines the economic indicators for a country spanning from 1980 to 2027. Over these years, the GDP (in both purchasing power parity and nominal terms) exhibits a generally upward trend, indicating steady economic growth. For instance, GDP grew from approximately $155.4 billion in 1980 to an estimated $1,997.8 billion by 2027. The GDP per capita has also increased significantly, reflecting improvements in living standards, moving from around $10,498 in 1980 to approximately $72,358 by 2027. However, fluctuations in GDP growth rates can be observed, particularly during economic downturns, such as in 2020 when a contraction of -2.1% occurred, possibly due to external shocks like the COVID-19 pandemic. The inflation rates and unemployment figures also show varying trends throughout this period, affecting overall economic stability. As we move to analyze the correlation between GDP growth and other economic indicators, it will be important to assess how factors such as inflation, unemployment, and government debt interact with GDP performance over time.
    </p>

    <!-- Correlation Dot Plot: GDP growth vs Unemployment, Inflation, Government Debt -->
    <h2>Correlation between GDP Growth and Other Economic Indicators</h2>
    <div id="correlation-dot-plot" class="chart-container"></div>
    <div class="gdp-indicators">
        <div class="indicator">
            <h3>GDP Growth and Inflation Rate</h3>
            <p>The data suggests that usually low inflation rates, typically kept around 0.2% to 4%, are often associated with moderate economic growth, where GDP increases by about 0.2% to 0.4%. This implies a trend where controlled inflation rates are conducive to steady growth. However, this balance may indicate that economies try to maintain inflation at manageable levels to prevent adverse effects on growth. High inflation tends to create economic instability, which may stifle growth, while low inflation can encourage sustainable development. The example aligns with the broader economic understanding that moderate inflation supports healthy GDP growth.</p>
        </div>
    
        <div class="indicator">
            <h3>GDP Growth and Unemployment Rate</h3>
            <p>
                There is generally an inverse relationship between GDP growth and unemployment, known as Okun's Law. For example, in 2020, a GDP decline of 2.1% corresponded with an unemployment rate of 6.5%, while in 2021, GDP growth of 4.9% was paired with a drop in unemployment to 5.1%.
                
                Typically, lower unemployment signals stronger economic performance and higher GDP growth. However, when unemployment approaches very low levels (around 1%), GDP growth can become unpredictable, fluctuating between 0.3% and -0.1%. This suggests that at extremely low unemployment, the economy may face constraints like labor shortages and increased costs, dampening growth despite a tight labor market.</p>
        </div>
    
        <div class="indicator">
            <h3>GDP Growth and Government Debt</h3>
            <p>There is no certain correlation between government debt and GDP growth. The data indicates that most instances show GDP growth around 0.02% when government debt levels are present. This suggests that while there may be some relationship, it is not definitive, and other factors likely play a significant role in influencing GDP growth.</p>
        </div>
    </div>
    
    
    <!-- Area Plot: Gross State Product -->
    <h2>Gross State Product of Australian States</h2>
    <div id="state-product-area-plot" class="chart-container"></div>
    <p>
        The area chart illustrating the dataset presents a compelling visual representation of the population growth trends across Australia's states and territories from June 1990 to June 2023. The chart showcases the steady upward trajectory of population numbers in New South Wales, Victoria, Queensland, and other regions, highlighting the relative growth rates and demographic shifts over the years. Notably, New South Wales and Victoria consistently maintain the largest populations, with both states experiencing substantial growth, peaking at approximately 733,087 and 535,489 residents, respectively, by mid-2023. Queensland also demonstrates robust growth, particularly evident in the late 2000s and 2010s, culminating in a population of 464,580 in June 2023. In contrast, regions like the Northern Territory and the Australian Capital Territory exhibit more modest growth, reflecting unique demographic dynamics. The area chart effectively conveys the disparities in population growth across Australia, providing insights into regional trends and the overall demographic landscape over more than three decades.
    </p>

    <!-- Map: Global GDP Growth -->
    <h2>Global GDP Growth Over the Globe</h2>
    <div id="global-gdp-map" class="map-container"></div>
    <p>
        The dataset provides an overview of GDP growth projections for various countries in 2024, with Australia projected to experience a modest growth rate of 1.2%. When comparing Australia to other nations, it reveals a spectrum of economic performance. For instance, countries like Antigua and Barbuda (5.4%), Bangladesh (6%), and Côte d'Ivoire (6.6%) are expected to significantly outpace Australia, indicating more robust economic growth driven by factors such as emerging markets and increased foreign investment.

Conversely, several nations face slower or negative growth projections. For example, Equatorial Guinea is forecasted to contract by -5.5%, and Puerto Rico shows a minimal growth of -0.2%. In comparison, Australia's growth appears tepid, particularly against the backdrop of countries like India (6.3%) and Guyana (26.6%), which are poised for explosive economic expansion. This comparison illustrates Australia’s relatively stable but modest economic outlook amid a global landscape of diverse growth trajectories, emphasizing the varying factors influencing economic performance across different regions.
    </p>

    <!-- Latest Industry GDP Contribution in Australia (March 2023) -->
    <h2>Industry GDP Contribution in Australia - March 2023</h2>
    <div class="chart-container">
        <div id="industry-gdp-bar-chart" class="chart"></div>
        <p class="chart-description">
            The pie chart derived from the dataset provides a visual breakdown of the contributions of various sectors to Australia's Gross Domestic Product (GDP) in dollar amounts and percentage changes. Each sector is represented as a distinct segment, showcasing its relative size and impact on the overall economy. The mining sector stands out as the largest contributor, with a significant value of approximately $80.9 billion, followed by ownership of dwellings at around $45.9 billion. Other notable sectors include agriculture, forestry, and fishing; manufacturing; and health care and social assistance, each contributing substantially to the GDP. The chart highlights the sectors experiencing growth, such as administrative and support services and health care, both showing a percentage change of 2.0%, while agriculture and mining reflect contrasting trends with decreases of -4.8% and modest growth of 1.7%, respectively. This pie chart effectively illustrates the diverse economic landscape of Australia, emphasizing both the magnitude and the varying performance of each sector within the national economy.
        </p>
    </div>
    
    <!-- Industry Contribution by State -->
    <h2>Percentage Change of Industry Contribution by State (March 2023)</h2>
    <div id="industry-state-bar-chart" class="chart-container"></div>
    <p>Lastly, this graph depicts the contributions of various industries to the Gross Domestic Product (GDP) across different states in Australia, including New South Wales (NSW), Victoria (VIC), Queensland (QLD), South Australia (SA), Western Australia (WA), Tasmania (TAS), Northern Territory (NT), and Australian Capital Territory (ACT), as well as the total national contribution (Aust). Each industry shows varying levels of impact on both state and national economies.

        For instance, the Mining industry significantly contributes to Western Australia's economy with a 1.5% growth, while Northern Territory exhibits a notable decline of -5.3%. Similarly, Transport, Postal, and Warehousing sees positive growth across all regions, especially in Tasmania with a 1% increase, contributing to a national growth of 0.6%. On the other hand, Agriculture, Forestry, and Fishing presents mixed results, with slight growth in Queensland (0.3%) and South Australia (0.4%) but declines in Tasmania (-0.7%) and Victoria (-0.1%).
        
        By comparing state-level contributions to the national total, this graph highlights regional strengths and industry-specific trends, showcasing how each state's economic activities contribute to the overall national performance across sectors like mining, manufacturing, and healthcare.</p>
</div>

<footer>
    <div class="metadata">
        <h2>Metadata</h2>
        <ul>
            <li>
                <strong>First Graph:</strong> 
                <p>Source: <a href="https://www.imf.org/en/Publications/WEO/weo-database/2022/October/weo-report?c=193,&s=NGDP_RPCH,NGDPD,PPPGDP,NGDPDPC,PPPPC,PCPIPCH,LUR,GGXWDG_NGDP,&sy=1980&ey=2027&ssm=0&scsm=1&scc=0&ssd=1&ssc=0&sic=0&sort=country&ds=.&br=1" target="_blank">International Monetary Fund</a></p>
            </li>
            <li>
                <strong>Second Graph:</strong> 
                <p>Source: <a href="https://www.abs.gov.au/statistics/economy/national-accounts/australian-national-accounts-state-accounts/latest-release#new-south-wales" target="_blank">Australian Bureau of Statistics</a></p>
            </li>
            <li>
                <strong>Third Graph:</strong> 
                <p>Source: <a href="https://www.kaggle.com/datasets/sazidthe1/world-gdp-growth" target="_blank">Kaggle Dataset</a></p>
            </li>
            <li>
                <strong>Fourth Graph:</strong> 
                <p>Source: <a href="https://www.abs.gov.au/statistics/labour/employment-and-unemployment/labour-force-australia-detailed/latest-release" target="_blank">Australian Bureau of Statistics - Labour Force</a></p>
            </li>
            <li>
                <strong>Fifth Graph:</strong> 
                <p>Source: <a href="https://www.abs.gov.au/statistics/economy/national-accounts/australian-national-accounts-state-accounts/latest-release#new-south-wales" target="_blank">Australian Bureau of Statistics - State Accounts</a></p>
            </li>
        </ul>
        <p><strong>Author:</strong>Sing Yau Lo</p>
        <p><strong>Date:</strong> 12/10/2024</p>
    </div>
    
</footer>

<script>
    // Vega-Lite specification for GDP (PPP) and GDP (Nominal)
    const specvisGDPnominalandPPP = {
      "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
      "data": {
        "url": "https://raw.githubusercontent.com/tedasdf/assignment2/refs/heads/main/csv_file/GDP_INF_UNE_DEBT_RATE.csv",
        "format": {
          "type": "csv"
        }
      },
      "transform": [
        {
          "fold": ["GDP(in billion USDPPP)", "GDP (in billion USDnominal)"],
          "as": ["GDP Type", "Value"]
        }
      ],
      "layer": [
        {
          "mark": "line",
          "encoding": {
            "x": {
              "field": "Year",
              "type": "temporal",
              "title": "Year"
            },
            "y": {
              "field": "Value",
              "type": "quantitative",
              "title": "GDP (in billion)",
              "axis": {"titleColor": "#1f77b4"}
            },
            "color": {
              "field": "GDP Type",
              "type": "nominal",
              "scale": {
                "domain": [
                  "GDP(in billion USDPPP)",
                  "GDP (in billion USDnominal)"
                ],
                "range": ["#1f77b4", "#ff7f0e"]
              },
              "legend": {
                "title": "GDP Type"
              }
            }
          }
        }
      ],
      "resolve": {"scale": {"y": "shared"}},
      "title": "Comparison of GDP (PPP) and GDP (Nominal) Over the Years",
      "width": 800,
      "height": 400
    };

    // Embed the Vega-Lite visualization
    vegaEmbed('#gdp-line-chart', specvisGDPnominalandPPP).catch(console.error);
    
    const specvisGDPinfl = {
  "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
  "hconcat": [

    {
      "data": {
        "url": "https://raw.githubusercontent.com/tedasdf/assignment2/refs/heads/main/csv_file/GDP_INF_UNE_DEBT_RATE.csv",
        "format": {
          "type": "csv"
        }
      },
      "mark": "point",
      "encoding": {
        "x": {
          "field": "GDP growth (real)",
          "type": "quantitative",
          "title": "GDP Growth (Real)"
        },
        "y": {
          "field": "Inflation rate(in percent)",
          "type": "quantitative",
          "title": "Inflation Rate (%)"
        }
      },
      "title": "Correlation between GDP Growth and Inflation Rate"
    },
    {
      "data": {
        "url": "https://raw.githubusercontent.com/tedasdf/assignment2/refs/heads/main/csv_file/GDP_INF_UNE_DEBT_RATE.csv",
        "format": {
          "type": "csv"
        }
      },
      "mark": "point",
      "encoding": {
        "x": {
          "field": "GDP growth (real)",
          "type": "quantitative",
          "title": "GDP Growth (Real)"
        },
        "y": {
          "field": "Unemployment (in percent)",
          "type": "quantitative",
          "title": "Unemployment Rate (%)"
        }
      },
      "title": "Correlation between GDP Growth and Unemployment Rate"
    },
    {
      "data": {
        "url": "https://raw.githubusercontent.com/tedasdf/assignment2/refs/heads/main/csv_file/GDP_INF_UNE_DEBT_RATE.csv",
        "format": {
          "type": "csv"
        }
      },
      "mark": "point",
      "encoding": {
        "x": {
          "field": "GDP growth (real)",
          "type": "quantitative",
          "title": "GDP Growth (Real)"
        },
        "y": {
          "field": "Government debt(in percen of GDP)",
          "type": "quantitative",
          "title": "Government Debt (% of GDP)"
        }
      },
      "title": "Correlation between GDP Growth and Government Debt (% of GDP)"
    }
  ],
  
};

vegaEmbed('#correlation-dot-plot', specvisGDPinfl);

const specvisGSP = {
  "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
  "data": {
    "url": "https://raw.githubusercontent.com/tedasdf/assignment2/refs/heads/main/csv_file/Gross%20state%20product-%20Chain%20volume%20measures%20in%20millions.csv",
    "format": {
      "type": "csv"
    }
  },
  "transform": [
    {
      "fold": [
        "New South Wales",
        "Victoria",
        "Queensland",
        "South Australia",
        "Western Australia",
        "Tasmania",
        "Northern Territory",
        "Australian Capital Territory"
      ],
      "as": ["State", "GSP"] 
    }, 
    {
      "calculate": "datum.GSP / 1000",
      "as": "GSP_in_billions"
    }
  ],
  "mark": "area",
  "encoding": {
    "x": {
      "field": "Year",
      "type": "temporal",
      "title": "Year",
      "axis": {
        "format": "%Y"
      }
    },
    "y": {
      "field": "GSP_in_billions",
      "type": "quantitative",
      "title": "Gross State Product (in billions AUD)"
    },
    "color": {
      "field": "State",
      "type": "nominal",
      "title": "State"
    },
    "tooltip": [
      {"field": "State", "type": "nominal", "title": "State"},
      {"field": "Year", "type": "temporal", "title": "Year"},
      {"field": "GSP_in_billions", "type": "quantitative", "title": "Gross State Product (in billions AUD)"}
    ]
  },
  "width": 800,
  "height": 400
};

vegaEmbed('#state-product-area-plot', specvisGSP);


const specMap = {
    "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
    "title": "GDP Data by Country for 2024",
    "width": 800,
    "height": 400,
    "background": "#e0f7fa",
    "projection": {"type": "equalEarth"},
    "layer": [
    {
    "data": {
        "url": "https://raw.githubusercontent.com/tedasdf/assignment/main/ne_110m.json",
        "format": {
        "type": "topojson",
        "feature": "ne_110m_admin_0_countries"
        }
    },
    "mark": {
        "type": "geoshape",
        "fill": "gray",
        "stroke": "black"
    },
    "encoding": {
        "tooltip": [
        {"field": "properties.NAME", "type": "nominal", "title": "Country"},
        {"field": "2024", "type": "quantitative", "title": "GDP (%)"}
        ]
    }
    },
    {
    "data": {
        "url": "https://raw.githubusercontent.com/FIT3179/Vega-Lite/main/3_choropleth_map/js/ne_110m_admin_0_countries.topojson",
        "format": {
        "type": "topojson",
        "feature": "ne_110m_admin_0_countries"
        }
    },

    "transform": [        
        {
        "lookup": "properties.NAME",
        "from": {
            "data": {
            "url": "https://raw.githubusercontent.com/tedasdf/assignment/main/world_gdp_data.csv",
            "format": {"type": "csv"}
            },
            "key": "country_name",
            "fields": ["2024"]
        }
        },
        {
        "window": [
            {"op": "min", "field": "2024", "as": "minGDP"},
            {"op": "max", "field": "2024", "as": "maxGDP"}
        ]
        },
        {
        "calculate": "(datum['2024'] - datum['minGDP']) / (datum['maxGDP'] - datum['minGDP'])",
        "as": "normalized_gdp"
        }
        
    ],
    "mark": {"type": "geoshape"},
    "encoding": {
    "color": {
        "field": "2024",
        "type": "quantitative",
        "title": "GDP Growth (2024)",
        "scale": {
            "domain": [0, 1, 2, 5, 10, 20, 30],
            "range": ["#440154", "#482878", "#3e4989", "#31688e", "#26828e", "#35b779", "#fde725"] 
        },
        
        "legend": {
            "title": "GDP (%) (2024)",
            "orient": "bottom-right",
            "format": ".2f"
        }
        },
        "tooltip": [
        {"field": "properties.NAME", "type": "nominal", "title": "Country"},
        {"field": "2024", "type": "quantitative", "title": "GDP (%)"}
        ]
    }
    },
    {
    "data": {
        "url": "https://raw.githubusercontent.com/tedasdf/assignment/main/ne_110m.json",
        "format": {
        "type": "topojson",
        "feature": "ne_110m_graticules_30"
        }
    },
    "mark": {
        "type": "geoshape",
        "fill": null,
        "stroke": "black"
    }
    }
    ]
}
vegaEmbed('#global-gdp-map', specMap);
const spec = {
  "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
  "description": "A pie chart showing GDP contribution by industry, grouping smaller values into 'Others'.",
  "data": {
      "url": "https://raw.githubusercontent.com/tedasdf/assignment2/refs/heads/main/csv_file/GDPcontributionbyindustry.csv",
      "format": {
          "type": "csv"
      }
  },
  "transform": [
      {
          "filter": "datum.Sector !== 'GROSS DOMESTIC PRODUCT ;' && datum.Sector !== 'Gross value added at basic prices ;'"
      },
      {
          "calculate": "datum['$ Millions'] < 11000 ? 'Others' : datum.Sector",
          "as": "Sector_Grouped"
      }
  ],
  "mark": "arc",
  "encoding": {
      "theta": {
          "field": "$ Millions",
          "type": "quantitative",
          "aggregate": "sum"
      },
      "color": {
          "field": "Sector_Grouped",
          "type": "nominal",
          "scale": {
              "scheme": "category20"
          },
          "legend": {
              "title": "Industry"
          }
      },
      "tooltip": [
          {"field": "Sector_Grouped", "type": "nominal", "title": "Industry"},
          {"field": "$ Millions", "type": "quantitative", "title": "Contribution ($ Millions)", "format": ".3s"},
          {"field": "Percentage changes", "type": "quantitative", "title": "Percentage changes(%)"}
      ]
  }
};
vegaEmbed('#industry-gdp-bar-chart', spec);
const specfinal = {
  "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
  "width": 800,
  "height": 400,
  "hconcat": [
    {
      "data": {
        "url": "https://raw.githubusercontent.com/tedasdf/assignment2/refs/heads/main/csv_file/different%20state%20contribution%20to%20GSP%20by%20Industry%20vs%20Australia.csv",
        "format": {
          "type": "csv"
        }
      },
      "transform": [
        {
          "fold": ["NSW", "VIC", "QLD", "SA", "WA", "TAS", "NT", "ACT", "Aust"],
          "as": ["State", "Contribution"]
        },
        {
          "calculate": "clamp(datum.Contribution, -2, 2)",  // Clamping the values
          "as": "CappedContribution"
        },
        {
          "filter": {
            "param": "select"
          }
        }
      ],
      "selection": {
        "select": {
          "type": "single",
          "fields": ["State"],
          "bind": {
            "input": "select",
            "options": ["NSW", "VIC", "QLD", "SA", "WA", "TAS", "NT", "ACT"]
          },
          "init": {"State": "NSW"}
        }
      },
      "mark": {
        "type": "bar",
        "opacity": 1
      },
      "encoding": {
        "y": {
          "field": "industry",
          "type": "nominal",
          "title": "Industry",
          "sort": null
        },
        "x": {
          "field": "CappedContribution",  // Use the clamped values
          "type": "quantitative",
          "title": "Contribution to GSP (ppt)",
          "scale": {
            "domain": [-2, 2]  // Set the scale between -2 and 2
          }
        },
        "color": {
          "field": "State",
          "type": "nominal",
          "title": "State",
          "legend": null
        },
        "tooltip": [
          {"field": "industry", "type": "nominal", "title": "Industry"},
          {"field": "Contribution", "type": "quantitative", "title": "Original Contribution (ppt)"},
        ]
      },
      "title": "Contribution of Industries to GSP by Selected States"
    },
    {
      "data": {
        "url": "https://raw.githubusercontent.com/tedasdf/assignment2/refs/heads/main/csv_file/different%20state%20contribution%20to%20GSP%20by%20Industry%20vs%20Australia.csv",
        "format": {
          "type": "csv"
        }
      },
      "transform": [
        {
          "fold": ["Aust"],
          "as": ["State", "Contribution"]
        },
        {
          "calculate": "clamp(datum.Contribution, -2, 2)",  // Clamping the values
          "as": "CappedContribution"
        },
        {
          "filter": {
            "field": "State",
            "equal": "Aust"
          }
        }
      ],
      "mark": {
        "type": "bar",
        "opacity": 1
      },
      "encoding": {
        "y": {
          "field": "industry",
          "type": "nominal",
          "title": "Industry",
          "sort": null
        },
        "x": {
          "field": "CappedContribution",  // Use the clamped values
          "type": "quantitative",
          "title": "Contribution to GSP (ppt)",
          "scale": {
            "domain": [-2, 2]  // Set the scale between -2 and 2
          }
        },
        "color": {
          "value": "#1f77b4"
        },
        "tooltip": [
          {"field": "industry", "type": "nominal", "title": "Industry"},
          {"field": "Contribution", "type": "quantitative", "title": "Original Contribution (ppt)"},  // Display original value in tooltip
        ]
      },
      "title": "Total Contribution of Industries in Australia"
    }
  ]
};
vegaEmbed('#industry-state-bar-chart', specfinal);
</script>

</body>
</html>
